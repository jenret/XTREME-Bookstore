<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XtremeBookStore</title>
    <script type="text/javascript">
        //this page would only show books available
        //ISBN will ID
        //keep track of what store the book is available

        //so when an employee logs in, make visible the receipt form
        //if admin, show how well the stores are doing, show sales etc
        //render the login first, and then ^
        function login() {

        }

        //this is an example function that shows and hides elements
        // function myFunction() {
        //     var x = document.getElementById("myDIV");
        //     if (x.style.display === "none") {
        //         x.style.display = "block";
        //     } else {
        //         x.style.display = "none";
        //     }
        // }

        function getBooks() {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function () {
                if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
                    var objects = JSON.parse(this.responseText);
                    renderBooks(objects);
                }
            }
            xmlHttp.open("GET", "http://localhost:8080/book/findAll", true);
            xmlHttp.send();
        }

        function renderBooks(books) {
            var bookList = document.getElementById("bookList");
            bookList.innerHTML = "";
            var bookHTML = ""
            bookHTML += "<table><tr>" +
                "<th>" + "ISBN" + "</th>" +
                "<th>" + "Title" + "</th>" +
                "<th>" + "Author" + "</th>" +
                "<th>" + "Publish Date" + "</th>" +
                "<th>" + "Edition" + "</th>" +
                "<th>" + "Purchase Price" + "</th>" +
                "</tr> "
            for (var object of books) {
                bookHTML += "<tr>" +
                    "<td>" + object.ISBN + "</td>" +
                    "<td>" + object.title + "</td>" +
                    "<td>" + object.author + "</td>" +
                    "<td>" + object.publishDate + "</td>" +
                    "<td>" + object.edition + "</td>" +
                    "<td>" + object.purchasePrice + "</td>"
                bookList.innerHTML = bookHTML;
            }
        }

        function sendBackReceipt() {
            var id = document.getElementById("id").value;
            var name = document.getElementById("name").value;
            var weapon = document.getElementById("weaponType").value;
            var object = {
                "id": id,
                "name": name,
                "weaponType": weapon
            }
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open("POST", "http://localhost:8080/employee");
            xmlHttp.setRequestHeader("Content-Type", "application/json"); //sends json
            xmlHttp.onreadystatechange = function () {
                console.log("Ready state ", this.status);
                if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
                    console.log("Successfully posted");
                    getEntries();
                }
            }
            xmlHttp.send(JSON.stringify(object));
            var id = document.getElementById("id").value = "";
            var name = document.getElementById("name").value = "";
            var weapon = document.getElementById("weaponType").value = "";
        }

        window.onload = function () {
            getBooks();
        }


    </script>
</head>
<nav>

</nav>
<body>
<h1>Xtreme Bookstore</h1>
<h2>Hello Valued Employee</h2>

<div id="login">
    <h2>Login</h2>
    <label>Username</label>
    <input type="text" id="username">
    <br/>
    <label>Password</label>
    <input type="password" id="password">
    <br/>
    <button type="submit">Login</button>
    <br/>
</div>

<div id="logout">
    <button type="submit">Logout</button>
</div>

<div id="receiptForm">
    <label>ISBN</label>
    <input type="text" id="ISBN"/>
    <br/>
    <label>Title</label>
    <input type="text" id="title"/>
    <br/>
    <label>Author</label>
    <input type="text" id="author"/>
    <br/>
    <label>Publish Date</label>
    <input type="text" id="publishDate"/>
    <br/>
    <label>Edition</label>
    <input type="text" id="edition"/>
    <br/>
    <label>Price</label>
    <input type="text" id="price"/>
    <br/>
    <button onclick="sendBackReceipt();">Add Sale</button>
</div>

<div id="graphArea">
    <div id="monthlyConsumable"></div>
    <div id="monthlyCustomer"></div>
    <div id="monthlySales"></div>
</div>
</body>
</html>